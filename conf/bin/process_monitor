#!/usr/bin/env python3
import sys
import subprocess
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

def handle_event(event_data):
    try:
        logger.info(f"Received event: {event_data}")

        if 'PROCESS_STATE_FATAL' in event_data or 'PROCESS_STATE_EXITED' in event_data:
            logger.warning("Process monitoring event received")

    except Exception as e:
        logger.error(f"Error handling event: {e}")

def main():
    logger.info("Process monitor started")

    for line in sys.stdin:
        if line.strip():
            handle_event(line.strip())

    logger.info("Process monitor stopped")

if __name__ == '__main__':
    main()