# Glitchtip AIO 环境变量配置示例
# 复制此文件为 .env 并根据需要修改配置
#
# 注意事项：
# 1. 部分变量（如 DEBUG, DB_PASSWORD, EMAIL_URL 等）会覆盖容器内的默认设置
# 2. 部分变量（如 CONTAINER_NAME, DATA_DIR 等）仅供 justfile 使用，不影响容器
# 3. 生产环境部署时请务必修改默认密码和密钥

# =============================================================================
# 基础配置
# =============================================================================

# 容器名称
CONTAINER_NAME=glitchtip-aio

# 镜像名称
IMAGE_NAME=glitchtip-aio

# 数据目录（相对路径或绝对路径）
DATA_DIR=./data

# =============================================================================
# 网络配置
# =============================================================================

# 默认端口
DEFAULT_PORT=8000

# 默认域名
DEFAULT_DOMAIN=http://localhost:8000

# =============================================================================
# 数据持久化配置
# =============================================================================

# 是否启用数据持久化
# true: 数据保存在宿主机，容器重启后数据不丢失
# false: 数据保存在容器内，容器删除后数据丢失
PERSIST_DATA=false

# =============================================================================
# 端口暴露配置
# =============================================================================

# 是否暴露 Web 端口
EXPOSE_WEB_PORT=true

# 是否暴露数据库端口（生产环境建议设为 false）
EXPOSE_DB_PORT=false

# 是否暴露 Redis 端口（生产环境建议设为 false）
EXPOSE_REDIS_PORT=false

# =============================================================================
# 安全配置（生产环境）
# =============================================================================

# 数据库密码（生产环境请修改）
# 注意：此变量会覆盖容器内的数据库密码设置
DB_PASSWORD=your_secure_password_here

# Redis 密码（生产环境请修改）
# 注意：此变量会覆盖容器内的 Redis 密码设置
REDIS_PASSWORD=your_secure_redis_password_here

# Django 密钥（生产环境请使用强随机密钥）
# SECRET_KEY=$(openssl rand -hex 32)

# 调试模式（生产环境请设为 false）
# 注意：此变量会覆盖容器内的 DEBUG 设置
DEBUG=false

# =============================================================================
# 邮件配置（可选）
# =============================================================================

# 默认发件人邮箱
DEFAULT_FROM_EMAIL=glitchtip@yourdomain.com

# 邮件服务器配置
# 注意：此变量会覆盖容器内的邮件设置
EMAIL_URL=smtp://user:password@smtp.example.com:587

# =============================================================================
# 示例用法
# =============================================================================

# 1. 使用默认配置部署
# just deploy

# 2. 持久化数据部署
# PERSIST_DATA=true just deploy

# 3. 自定义端口部署
# just deploy-port 9000

# 4. 生产环境部署示例
# PERSIST_DATA=true \
# EXPOSE_WEB_PORT=true \
# EXPOSE_DB_PORT=false \
# EXPOSE_REDIS_PORT=false \
# DEBUG=false \
# just deploy

# 5. 开发环境部署示例
# PERSIST_DATA=false \
# EXPOSE_WEB_PORT=true \
# EXPOSE_DB_PORT=true \
# EXPOSE_REDIS_PORT=true \
# DEBUG=true \
# just deploy

# =============================================================================
# 注意事项
# =============================================================================

# 1. 生产环境请务必修改默认密码和密钥
# 2. 建议配置 HTTPS 证书
# 3. 定期备份数据库数据
# 4. 监控服务器资源使用情况
# 5. 根据实际需求调整端口暴露配置